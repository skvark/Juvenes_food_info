<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Juvenes food data : Offers food info from Tampere region Juvenes restaurants in JSON." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Juvenes food data</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/skvark/TUT_Juvenes_food">View on GitHub</a>

          <h1 id="project_title">Juvenes food data</h1>
          <h2 id="project_tagline">Offers food info from Tampere region Juvenes restaurants in JSON.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/skvark/TUT_Juvenes_food/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/skvark/TUT_Juvenes_food/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>Juvenes food info in JSON</h1>

<p>This project's main goal is to offer an easy way to get food data from (Juvenes) restaurants located in different campuses around Tampere.</p>

<p>Yeah, I built this API on top of an existing API hosted by <a href="http://www.juvenes.fi/DesktopModules/Talents.LunchMenu/LunchMenuServices.asmx">Juvenes</a>. Why? Because that API is just... too messy, incoherent, unreadable (yes, it would be nice if the machine readable data could be formatted so that humans could be able to read it) and very poorly documented.</p>

<p>It took many painful hours to dig all the necessary id's for the restaurants and cafes from Juvenes website/API. There's a method to get all the id's in the API, but that's useless because it does not tell the location (campus) of the restaurants (neither does any of the other methods, street address doesn't help much) so I had to do everything manually. The openinfoid's in the Juvenes API must be placed in kitcheninfoid-method.. don't ask why, that's just something I had to figure out myself because of the poor documentation.</p>

<p>This API will be hosted by on my server, I'll publish it later. Probably just serves the static files by lang-parameter and campus-parameter. </p>

<p>I'm currently building an HTML5 web application on top of this. </p>

<h2>Changelog</h2>

<ul>
<li>27.12.2012 Added preliminary support for TAY, TAMK and TAKK campuses</li>
<li>28.12.2012 Fixed week 52 -&gt; 53 problems, modified logging, added fatal_error flag and put error-flag for every week, added very early support for TAY, TAMK and TAKK, changed file naming</li>
<li>29.12.2012  Major refactoring, renamed class, sliced to smaller methods, enhanced error handling, optimized speed and removed unnecessary looping, added new folders and fixed several bugs</li>
</ul><h2>Usage</h2>

<p>Script creates by default <strong><em>ruoka_[campus_name].json</em></strong> or <strong><em>food_[campus_name].json</em></strong> file, depending on language.</p>

<p>Examples can be found from the repository.</p>

<p>To run:
<code>python json_food_TUT.py &lt;language&gt;</code></p>

<p>Language: fi or en, defaults to fi if no parameter given</p>

<p>I recommend to use cron for scheluded runs.</p>

<h2>Documentation</h2>

<p>Timestamp is in following format (unix timestamp, integer) and tells the time when file was updated:</p>

<ul>
<li><code>"update_timestamp": 1349082412.619589</code></li>
</ul><p>The error flag (string) in every week is probably never ok, because some restaurant is always closed and in that case Juvenes API returns internal server error -headers:</p>

<ul>
<li>
<code>"error": "False"</code> everything ok, <code>"error": "Some message..."</code>
</li>
</ul><p>On every day there's date in following format (string):</p>

<ul>
<li><code>"date": "24.9.2012"</code></li>
</ul><p>In case of misconfiguration or some other fatal error the class returns only <code>update_timestamp</code> and <code>fatal_error</code> (string, False or True):</p>

<ul>
<li><code>"fatal_error": "False"</code></li>
</ul><p>More to come.</p>

<h2>License</h2>

<p>Copyright (C) 2012 Olli-Pekka Heinisuo</p>

<p>Since the code is open source, feel free to contribute or use it for your own purposes as long as licence conditions are met.</p>

<p>Distributed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache-2.0 license</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Juvenes food data maintained by <a href="https://github.com/skvark">skvark</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
